<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>The Daily Quote</title>

	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

	<!--[if lt IE 8]>
	<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
	<![endif]-->

	<!--[if lt IE 9]>
	<script src="assets/scripts/html5shiv.js"></script>
	<![endif]-->
	
	<link href='http://fonts.googleapis.com/css?family=Arbutus+Slab|Open+Sans|Open+Sans:700' rel='stylesheet' type='text/css'>

<style type="text/css">
	@import url(http://reset5.googlecode.com/hg/reset.min.css);
	 
	body{
		font-family: 'Arbutus Slab', 'Open Sans', serif;
	}

	#container{
		background-repeat: no-repeat;
		background-size: auto 100%;
		background-position: center;
		position: relative;
		margin: 0 auto;
		border-left: 1px solid #333;
		border-right: 1px solid #333;
	}
	
	.bar{
		position: absolute;
		display: block;
		width: 100%;

		opacity: 0.7;
		transition: opacity .25s ease-in-out;
		-moz-transition: opacity .25s ease-in-out;
		-webkit-transition: opacity .25s ease-in-out;
	}
		.bar:hover{opacity: 0.7;}
	
	#container>header{
		top: 0;
		border-bottom: 1px solid #555;
	}
		header h1{
			padding: 15px 0;
			font-size: 2.5em;
			color: #000;
			text-align: center;
			opacity: 0.6;
		}
	
	blockquote{
		position: absolute;
		line-height: 1.3em;
		opacity: 0.8;
	}
		blockquote p{}
		blockquote footer{margin-top: 10px;}
		
	#container>footer{
		bottom: 0;
		border-top: 1px solid #555;
	}
		footer nav{
			overflow: hidden;
			margin: 0 auto;
			padding: 5px 0;
			width: 240px;
		}
			footer nav a{
				float: left; display: block;
				width: 80px; height: 60px;
				background: url("assets/img/icons.png") no-repeat;
				
				opacity: 0.2;
				transition: opacity .5s ease-in-out;
				-moz-transition: opacity .5s ease-in-out;
				-webkit-transition: opacity .5s ease-in-out;
			}
				footer nav a:hover{opacity: 0.8;}
				#about-menu-item{background-position: -147px -7px;}
				#quote-menu-item{background-position: 5px -7px;}
				#share-menu-item{background-position: -74px -7px;}
				#save-menu-item{background-position: -220px -7px;}
		footer section{
			display: none;
			margin: 0; padding: 20px 25%;
			border-top: 1px solid #aaa;
			background: #fff;
			text-align: center;
		}
			footer section h2{font-size: 2em; margin-bottom: 10px;}
			footer section p{}
</style>

<script type="text/javascript">
	var oPicWidth = 0;
	var oPicHeight = 0;
	var windowWidth = 0;
	var windowHeight = 0;
	
	var lastModal = "";
	
	var quotePhoto = "assets/photos/marcus_aurelius.jpg";
	var quoteTxt = "If unwilling to rise in the morning, say to thyself, 'I awake to do the work of a man.'";
	var quoteAuthor = "Marcus Aurelius";
	var quoteTxtSettings = {"positionX":3, "positionY":5, "containerWidth":35, "fontSize":3, "fontColor":"fff", "barsColor":"D5D7D6"};
	
	// INIT
	$(document).ready(function(){
		initQuote();
		
		// couple of events listeners
		$(window).resize(updateScaling);
		$("footer nav a").click(function(event){openModal(event);});
	});

	function openModal(event){
		var currentModal = event.target.id.replace(/\b-.+/,"-content");
		console.log("opening modal..." + event.target.id + " -> "+currentModal);
		
		// SET MENU ITEM OPACITY

		if(lastModal != "" && currentModal != lastModal)
			$("footer section#"+lastModal).slideToggle(1000, function() {
				// Animation complete.
			});
		$("footer section#"+currentModal).slideToggle(1000, function() {
			// Animation complete.
		});
		
		lastModal = currentModal;
	}

	// UPDATE SCALING
	function updateScaling(){
		windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
		windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
		//displayTxt(windowWidth+"*"+windowHeight);
		
		// set the current photo size
		if(oPicHeight >= windowHeight){
			var cPicHeight = windowHeight;
			$("body").css("marginTop","0px");
		}
		else{
			var cPicHeight = oPicHeight;
			$("body").css("marginTop",Math.floor((windowHeight-cPicHeight)/2)+"px");
		}
		var ratio = cPicHeight / oPicHeight;
		var cPicWidth = Math.floor(ratio * oPicWidth);
			
		// container scaling
		$("#container").height(cPicHeight);
		if(cPicWidth>windowWidth)
			$("#container").width(windowWidth-2*parseInt($("#container").css("border-left-width"),10)); // substracting the container border size
		else
			$("#container").width(cPicWidth);
				
		// quote txt scaling
		$("blockquote").css("font-size", quoteTxtSettings.fontSize*ratio+"em");
		$("blockquote p").css("text-indent", quoteTxtSettings.fontSize*ratio*-10+"px");

	}
	
	// DESIGN INIT
	function initQuote() {
		// init quote content
		$('#container').css('background-image', 'url(' + quotePhoto + ')');
		$("blockquote p").html("&#8220;"+quoteTxt+"&#8221;");
		$("blockquote footer").html("&mdash; "+quoteAuthor);
		
		// init quote styling
		$(".bar").css("background-color", "#"+quoteTxtSettings.barsColor);
		$("blockquote").css("marginTop",$("header").height());
		$("blockquote").css("color", "#"+quoteTxtSettings.fontColor);
		$("blockquote").width(quoteTxtSettings.containerWidth+"%");
		$("blockquote").css("left", quoteTxtSettings.positionX+"%");
		$("blockquote").css("top", quoteTxtSettings.positionY+"%");
		
		var newImg = new Image();
		newImg.onload = function() {
			oPicWidth = newImg.width;
			oPicHeight = newImg.height;
			updateScaling();
		}
		
		newImg.src = quotePhoto;
	}
	
	// TOOLBOX
	function updateWindowSize(){
	}
	function displayTxt(txt){
        $("header h1 span").html(" ("+txt+")");
	}
</script>

</head>

<body>

	<div id="container">
		<header class="bar">
			<h1>&mdash; THE DAILY QUOTE &mdash;<span></span></h1>
		</header>
		
		<blockquote>
			<p></p>
			<footer></footer>
		</blockquote>
		
		<footer class="bar">
			<nav id="menu">
				<a href="#" id="about-menu-item" alt="About Website"></a>
				<!--<a href="#" id="quote-menu-item" alt="About Quote"></a>-->
				<a href="#" id="share-menu-item" alt="Share"></a>
				<a href="#" id="save-menu-item" alt="Save"></a>
			</nav>
			<section id="about-content">
				<h2>ABOUT</h2>
				<p>This website has been created with dutyful care and feary dust.</p>
			</section>
			<section id="share-content">
				<h2>SHARE</h2>
				<p>This is the sharing menu.</p>
			</section>
			<section id="save-content">
				<h2>SAVE</h2>
				<p>This is the saving menu.</p>
			</section>
		</footer>
	</div>

</body>

</html>