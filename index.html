<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>The Quote Tribune</title>
	
	<link rel="shortcut icon" href="favicon.ico" /> 
	<link href='http://fonts.googleapis.com/css?family=Arbutus+Slab|Open+Sans|Open+Sans:700' rel='stylesheet' type='text/css'>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

	<!--[if lt IE 8]>
	<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
	<![endif]-->

	<!--[if lt IE 9]>
	<script src="https://s3-eu-west-1.amazonaws.com/thequotetribune/scripts/html5shiv.js"></script>
	<![endif]-->
	
	<!-- facebook og -->
	<meta property="og:url" content="">
	<meta property="og:title" content="">
	<meta property="og:description" content="" />
	<meta property="og:type" content="website">
	<meta property="og:image" content="">
	<meta property="og:site_name" content="The Quote Tribune">
	
<style type="text/css">
	@import url(http://reset5.googlecode.com/hg/reset.min.css);
	 
	body{
		color: #000;
		font-family: 'Arbutus Slab', 'Open Sans', serif;
	}
	a{color: #000;}
		a:hover{}

	#container{
		background-repeat: no-repeat;
		background-size: auto 100%;
		background-position: center;
		position: relative;
		margin: 0 auto;
		border-left: 1px solid #333;
		border-right: 1px solid #333;
	}
	
	.bar{
		position: absolute;
		display: block;
		width: 100%;

		opacity: 0.7;
		transition: opacity .25s ease-in-out;
		-moz-transition: opacity .25s ease-in-out;
		-webkit-transition: opacity .25s ease-in-out;
	}
		.bar:hover{opacity: 0.7;}
	
	#container>header{
		top: 0;
		border-bottom: 1px solid #555;
		text-align: center;
	}
		header h1{
			padding-top: 15px;
			font-size: 2em;
			opacity: 0.8;
		}
		header h2{
			padding: 15px 0;
			font-size: 1.2em;
			opacity: 0.6;
		}
	
	blockquote{
		position: absolute;
		line-height: 1.3em;
		opacity: 0.8;
	}
		blockquote p{}
		blockquote footer{margin-top: 10px;}
		
	#container>footer{
		bottom: 0;
		border-top: 1px solid #555;
	}
		footer nav{
			overflow: hidden;
			margin: 0 auto;
			padding: 5px 0;
			width: 320px;
		}
			footer nav a{
				float: left; display: block;
				width: 80px; height: 60px;
				background: url("https://s3-eu-west-1.amazonaws.com/thequotetribune/img/icons.png") no-repeat;
				/*background: url("assets/img/icons.png") no-repeat;*/
				
				opacity: 0.2;
				transition: opacity .5s ease-in-out;
				-moz-transition: opacity .5s ease-in-out;
				-webkit-transition: opacity .5s ease-in-out;
			}
				footer nav a:hover, footer nav a.active{opacity: 0.8;}

				#twitter-menu-item{background-position: -302px -6px;}
				#facebook-menu-item{background-position: -380px -7px;}
				#quotedetails-menu-item{background-position: 5px -7px;}
				#about-menu-item{background-position: -150px -7px;}
/*
				#quote-menu-item{background-position: 5px -7px;}
				#share-menu-item{background-position: -74px -7px;}
				#save-menu-item{background-position: -220px -7px;}
*/

		footer section{
			display: none;
			margin: 0; padding: 20px 32%;
			border-top: 1px solid #aaa;
			background: #fff;
			text-align: center;
		}
			footer section h3{font-size: 2em; margin-bottom: 15px;}
			footer section h4{margin-bottom: 7px;}
			footer section p{margin-bottom: 10px; line-height: 1.3em;}
			footer section q{font-style: italic;}
			footer section em{color: #666;}
			
			footer section#quotedetails-content{}
				footer section#more-content article{display: none;}
/*
			footer section#share-content ul{
				overflow: hidden;
				margin: 0 auto;
				padding: 5px 0;
				width: 160px;
				list-style-type: none;
			}
				footer section#share-content ul li{float: left;}
					footer section#share-content ul li a{
						float: left; display: block;
						width: 80px; height: 50px;
						background: url("https://s3-eu-west-1.amazonaws.com/thequotetribune/img/icons.png") no-repeat;
						
						opacity: 0.6;
						transition: opacity .5s ease-in-out;
						-moz-transition: opacity .5s ease-in-out;
						-webkit-transition: opacity .5s ease-in-out;
					}	
						footer section#share-content ul li a:hover{opacity: 1;}
						
						footer section#share-content ul li#twitter-sharing a{background-position: -296px -7px;}
						footer section#share-content ul li#facebook-sharing a{background-position: -358px -7px;}
						footer section#share-content ul li#buffer-sharing a{background-position: -420px -7px;}
						footer section#share-content ul li#email-sharing a{background-position: -488px -7px;}
*/
</style>

<script type="text/javascript">
	var oPicWidth = 0;
	var oPicHeight = 0;
	var windowWidth = 0;
	var windowHeight = 0;
	var lastModal = "";
	
	var quote =		{"id":"1234","text":"Begin - to begin is half the work, let half still remain; again begin this, and thou wilt have finished.","quotesomeUrl":"http://quoteso.me/q/9323","authorID":"marcus_aurelius"}
	var author =	{"name":"Marcus Aurelius","wikipediaRef":"Marcus_Aurelius","quotesomeUrl":"https://www.quotesome.com/authors/marcus-aurelius/quotes","photoPath":"https://s3-eu-west-1.amazonaws.com/thequotetribune/photos/marcus_aurelius.jpg","positionX":3, "positionY":5, "containerWidth":35, "fontSize":3.2, "fontColor":"fff", "barsColor":"D5D7D6"};
	
	// INIT
	$(document).ready(function(){
		initQuote();
		
		// couple of events listeners
		$(window).resize(updateScaling);
		$("footer nav a.modal").click(function(event){openModal(event);});
	});
	
	// DESIGN INIT
	function initQuote() {
		// Determine original photo dimensions
		var newImg = new Image();
		newImg.onload = function() {
			oPicWidth = newImg.width;
			oPicHeight = newImg.height;
			updateScaling();
		}
		newImg.src = author.photoPath;
	
		// init quote main content
		$('#container').css('background-image', 'url(' + author.photoPath + ')');
		$("blockquote p").html("&#8220;"+quote.text+"&#8221;");
		$("blockquote footer").html("&mdash; "+author.name);
		
		// init quote styling
		$(".bar").css("background-color", "#"+author.barsColor);
		$("blockquote").css("marginTop",$("header").height());
		$("blockquote").css("color", "#"+author.fontColor);
		$("blockquote").width(author.containerWidth+"%");
		$("blockquote").css("left", author.positionX+"%");
		$("blockquote").css("top", author.positionY+"%");
		
		// init quote details
		if(quote.quotesomeUrl){
			$("article#source p").html('<strong>Source</strong>: <a href="'+quote.quotesomeUrl+'" target="_blank">'+quote.quotesomeUrl+'</a>');
			$("article#source").show();
		}
		if(author.wikipediaRef){
			$("article#wikipedia h4").html('About '+author.name+' (more on <a href="" target="_blank">Wikipedia</a>)');
			$("article#wikipedia h4 a").attr("href","http://en.wikipedia.org/wiki/"+author.wikipediaRef);
			$.ajax({
				type: "GET",
				url: "http://en.wikipedia.org/w/api.php?format=json&action=query&prop=extracts&exsentences=10&titles="+author.wikipediaRef,
				dataType: "jsonp",
				success: function(data){
					if(data.query.pages[-1])
						return;
					for(var key in data.query.pages){
						var wikiData = data.query.pages[key];
						$("article#wikipedia p").html((wikiData.extract).replace(/(\<[a-z]+\>)+/,""));
					}
					$("article#wikipedia").show();
				},
				error: function(){
					 console.log("No Wikipedia data available.");
				}
			});
		}
		if(author.quotesomeUrl){
			$("article#more-quotes p").html('<a href="'+author.quotesomeUrl+'" target="_blank">Other quotes from Marcus Aurelius</a>');
			$("article#more-quotes").show();
		}
		
		// twitter button listener
		$('#twitter-menu-item').click(function(event) {
			window.open(
						"https://twitter.com/share?url="+encodeURIComponent(location.href)+"&via=thequotetribune&text=Words%20of%20wisdom%20from%20"+(author.name).replace(" ","%20")+":",
						'twitter',
						'width=626,height=436'
			);
			return false;
		});
		  
		// facebook meta and button listener
		$("meta[property='og:url']").attr("content","http://thequotetribune.com?fbrefresh="+quote.id);
		$("meta[property='og:title']").attr("content","Words of wisdom from "+author.name);
		$("meta[property='og:description']").attr("content","&#8220;"+quote.text+"&#8221; &mdash; "+author.name);
		$("meta[property='og:image']").attr("content",(author.photoPath).replace(/\.[0-9a-z]+$/,"_thumb.jpg"));44
		$('#facebook-menu-item').click(function(event) {
			window.open(
						'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href), 
						'facebook-share-dialog', 
						'width=626,height=436'
			);
			return false;
		});
	}

	// UPDATE SCALING
	function updateScaling(){
		windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
		windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
		
		// set the current photo size
		if(oPicHeight >= windowHeight){
			var cPicHeight = windowHeight;
			$("body").css("marginTop","0px");
		}
		else{
			var cPicHeight = oPicHeight;
			$("body").css("marginTop",Math.floor((windowHeight-cPicHeight)/2)+"px");
		}
		var ratio = cPicHeight / oPicHeight;
		var cPicWidth = Math.floor(ratio * oPicWidth);
			
		// container scaling
		$("#container").height(cPicHeight);
		if(cPicWidth>windowWidth)
			$("#container").width(windowWidth-2*parseInt($("#container").css("border-left-width"),10)); // substracting the container border size
		else
			$("#container").width(cPicWidth);
				
		// quote txt scaling
		$("blockquote").css("font-size", author.fontSize*ratio+"em");
		$("blockquote p").css("text-indent", author.fontSize*ratio*-10+"px");
	}

	// MENU TOGGLING
	function openModal(event){
		var currentModal = event.target.id.replace(/\b-.+/,"-content");
		
		if(lastModal != "") {
			$("#"+lastModal.replace(/\b-.+/,"-menu-item")).removeClass("active"); // disable menu icon
			$("footer section#"+lastModal).slideToggle(1000);
		}
		
		if(currentModal != lastModal) {
			$("#"+event.target.id).addClass("active"); // enable menu icon
			$("footer section#"+currentModal).slideToggle(1000);
			lastModal = currentModal;
		}
		else
			lastModal = "";
	}
</script>

</head>

<body>

	<div id="container">
		<header class="bar">
			<h1>&mdash; THE QUOTE TRIBUNE &mdash;</h1>
			<h2>Your daily inspirational fix</h2>
		</header>
		
		<blockquote>
			<p></p>
			<footer></footer>
		</blockquote>
		
		<footer class="bar">
			<nav id="menu">		
				<a href="#" id="twitter-menu-item" target="_blank"></a>
				<a href="#" id="facebook-menu-item" target="_blank"></a>
				<a href="#" id="quotedetails-menu-item" class="modal" alt="More Information"></a>
				<a href="#" id="about-menu-item" class="modal" alt="About"></a>
<!--
				<a href="#" id="share-menu-item" alt="Share"></a>
				<a href="#" id="save-menu-item" alt="Save"></a>
-->
			</nav>
			
			<section id="quotedetails-content">
				<h3>ABOUT THE QUOTE</h3>
				<article id="source">
					<p></p>
				</article>
				<article id="wikipedia">
					<h4></h4>
					<p></p>
				</article>
				<article id="more-quotes">
					<p></p>
				</article>
			</section>
			
			<section id="about-content">
				<h3>ABOUT THE QUOTE TRIBUNE</h3>
				<p>Some Latin chap once said <q>"Acta Non Verba"</q>, meaning <q>"Actions, not words"</q>. Thoughtful and true.</p>
				<p>But the thing is, words are powerful, and have always been inspirational for the most beautiful minds history has seen.</p>
				<p>So we believe quotes of the greatest must be heard and shared. These are packaged life lessons, they make you reconsider what you do and think, they encourage your ego to grow more daring, they make you laugh.</p>
				<p>And for us, attaching the author's photo to the words makes it even more powerful. It's a visual gong inside your brain.</p>
				<p>This is what we do here, everyday we give you a new awesome quote with that crazy one's picture.</p>
				<p>Anything to share? Your words here: <br>sayhi[at]thequotetribune[dot]com</p>
				<p><em>created by <a href="http://ivanprobst.com" target="_blank">Ivan Probst</a>, quotes curated by <a href="https://www.quotesome.com/" target="_blank">Quotesome</a></em></p>
			</section>
<!--
			<section id="share-content">
				<h3>SHARE</h3>
				<p>Spread the words, because they are worth it (usually)</p>
				<ul>
					<li id="twitter-sharing"></li>
					<li id="facebook-sharing"></li>
					<li id="buffer-sharing"></li>
					<li id="email-sharing"></li>
				</ul>
			</section>
			<section id="save-content">
				<h3>SAVE</h3>
				<p>This is the saving menu.</p>
			</section>
-->
		</footer>
	</div>

</body>

</html>