<html>
<head>
<title>The Daily Quote</title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<!--[if lt IE 8]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
<![endif]-->

<style type="text/css">
	@import url(http://reset5.googlecode.com/hg/reset.min.css);
	 
	body{
		background: #000;
		height: 100%;
	}

	#container{
		text-align: center;
	}
	
	.bar{
		display: block;
		height: 70px; width: 100%;
		background: #999;
	}
</style>

<script type="text/javascript">
	var oPicWidth = 0;
	var oPicHeight = 0;
	var windowWidth = 0;
	var windowHeight = 0;
	var cPicWidth = 0;
	var cPicHeight = 0;
	
	var imgSrc = "assets/photos/marcus_aurelius.jpg";
	
	// INIT
	$(document).ready(function(){
		updateWindowSize();	 displayTxt(windowWidth+"*"+windowHeight);
		
		updateOriginalPicSize(imgSrc);
	});

	// RESIZE EVENT
	$(window).resize(function(){
		updateWindowSize(); displayTxt(windowWidth+"*"+windowHeight);

		setPhotoSize();
	});

	// SET PHOTO
	function setPhotoSize(){
		cPicHeight = windowHeight - 2*($(".bar").height());
		if(oPicHeight >= cPicHeight){
			cPicWidth = (cPicHeight / oPicHeight) * oPicWidth;
			$("#image").width(cPicWidth);
			$("#image").height(cPicHeight);
			$("#image").attr("src",imgSrc);
			//alert("ok, photo is: "+cPicWidth+"*"+cPicHeight);
		}
		else {
			alert("ko, increasing each bar height to: "+Math.floor((windowHeight - oPicHeight)/2));
		}
	}
	
	// TOOLBOX
	function updateWindowSize(){
		windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
		windowHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
	}
	function displayTxt(txt){
        $("#top-bar").html(txt);
	}
	function updateOriginalPicSize(imgFile) {
		var newImg = new Image();

		newImg.onload = function() {
			oPicWidth = newImg.width;
			oPicHeight = newImg.height;
		  
			setPhotoSize();
			//alert ('The image size is '+oPicWidth+'*'+oPicHeight);
		}

		newImg.src = imgFile; // this must be done AFTER setting onload
	}
</script>

</head>

<body>

	<div id="container">
		<div id="top-bar" class="bar"></div>
		<img id="image" src="" />
		<!--<div id="quote">Ils se battent pour la dignit&eacute; des faibles.</div>-->
		<div id="bottom-bar" class="bar"></div>
	</div>

</body>

</html>